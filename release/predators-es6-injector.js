/*!
 * @project $M - Predators Module Management System
 * @requires jQuery (window.jQuery)
 * @version 0.0.1
 * @date Thu Jan 14 2016 17:19:08 GMT+0100 (W. Europe Standard Time)
**/
!function(window,jQuery){"use strict";function isString(input){return"string"===jQuery.type(input)}function isFunction(input){return jQuery.isFunction(input)}var reject=function(reason){var deferred=jQuery.Deferred();return setTimeout(function(){deferred.reject(reason)},0),deferred.promise()},resolve=function(){return jQuery.when.apply(jQuery,arguments)},ModuleScope=(function(){function Component(id,definition){this.id=id,this.definition=definition}return Component}(),function(){function ModuleScope(){}return ModuleScope}()),Module=function(){function Module(id,factory){this.id=id,this.factory=factory,this.scope=new ModuleScope}return Module.prototype.toString=function(){return this.id},Module.isModule=function(value){return value instanceof Module},Module}(),$M=function(){function $M(){this._YTOS_READY_EVENT_="yTosReady",this._INJECTOR_MODULES_CONTAINER_={},this._INJECTOR_COMPONENTS_CONTAINER_={}}return $M.prototype.get=function(id){var _this=this,deferred=jQuery.Deferred();return window.setTimeout(function(){return isString(id)?_this.hasSync(id)?deferred.resolve(_this._INJECTOR_MODULES_CONTAINER_[id]):deferred.reject("$M unknown module "+id):deferred.reject("$M.get, first param must be a string")}),deferred.promise()},$M.prototype.inspect=function(module){var promise=reject("$M.inspect unknown "+module+", param must be a string or a Module");return isString(module)&&(promise=this.get((module||"").toString())),Module.isModule(module)&&(promise=resolve(module)),promise.then(function(module){return module.scope})},$M.prototype.set=function(id,factory){if(!isString(id))throw Error("$M.set, first param must be a string");if(!isFunction(factory))throw Error("$M.set, second param must be a function");if(this.hasSync(id))throw Error("$M.set "+id+" alredy exists");return this._INJECTOR_MODULES_CONTAINER_[id]=new Module(id,factory),this},$M.prototype.hasSync=function(id){return this._INJECTOR_MODULES_CONTAINER_.hasOwnProperty(id)},$M.prototype.has=function(id){return this.hasSync(id)?resolve():reject()},$M.prototype.runModules=function(modules){for(var promises=[],i=0;i<modules.length;i++){var module=modules[i];promises.push(this.runModule(module))}return resolve.apply(jQuery,promises)},$M.prototype.runModule=function(module){var promise=reject("$M.runModule unknown "+module+", param must be a string or a Module");return isString(module)&&(promise=this.get((module||"").toString())),Module.isModule(module)&&(promise=resolve(module)),promise.then(function(module){var failure,deferred=jQuery.Deferred();try{module.factory.call(module.scope,jQuery)}catch(error){failure=error}return window.setTimeout(function(){failure?deferred.reject(failure):deferred.resolve(module)},0),deferred.promise()})},$M.prototype.yTosReady=function(module){var _this=this,deferred=jQuery.Deferred();return jQuery(document).on(this._YTOS_READY_EVENT_,function(){deferred.resolve(module&&_this.runModule(module))}),deferred.promise()},$M}(),$MInjector=new $M;Object.defineProperty?Object.defineProperty(window,"$M",{"value":$MInjector,"writable":!1,"enumerable":!0,"configurable":!1}):window.$M=$MInjector}(window,window.jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByZWRhdG9ycy1lczYtaW5qZWN0b3IuanMiXSwibmFtZXMiOlsid2luZG93IiwialF1ZXJ5IiwiaXNTdHJpbmciLCJpbnB1dCIsInR5cGUiLCJpc0Z1bmN0aW9uIiwicmVqZWN0IiwicmVhc29uIiwiZGVmZXJyZWQiLCJEZWZlcnJlZCIsInNldFRpbWVvdXQiLCJwcm9taXNlIiwicmVzb2x2ZSIsIndoZW4iLCJhcHBseSIsImFyZ3VtZW50cyIsIk1vZHVsZVNjb3BlIiwiQ29tcG9uZW50IiwiaWQiLCJkZWZpbml0aW9uIiwidGhpcyIsIk1vZHVsZSIsImZhY3RvcnkiLCJzY29wZSIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiaXNNb2R1bGUiLCJ2YWx1ZSIsIiRNIiwiX1lUT1NfUkVBRFlfRVZFTlRfIiwiX0lOSkVDVE9SX01PRFVMRVNfQ09OVEFJTkVSXyIsIl9JTkpFQ1RPUl9DT01QT05FTlRTX0NPTlRBSU5FUl8iLCJnZXQiLCJfdGhpcyIsImhhc1N5bmMiLCJpbnNwZWN0IiwibW9kdWxlIiwidGhlbiIsInNldCIsIkVycm9yIiwiaGFzT3duUHJvcGVydHkiLCJoYXMiLCJydW5Nb2R1bGVzIiwibW9kdWxlcyIsInByb21pc2VzIiwiaSIsImxlbmd0aCIsInB1c2giLCJydW5Nb2R1bGUiLCJmYWlsdXJlIiwiY2FsbCIsImVycm9yIiwieVRvc1JlYWR5IiwiZG9jdW1lbnQiLCJvbiIsIiRNSW5qZWN0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndyaXRhYmxlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0NBS0csU0FBVUEsT0FBUUMsUUFDckIsWUFDQyxTQUFTQyxVQUFTQyxPQUNmLE1BQThCLFdBQXZCRixPQUFPRyxLQUFLRCxPQUV2QixRQUFTRSxZQUFXRixPQUNoQixNQUFPRixRQUFPSSxXQUFXRixPQUU3QixHQUFJRyxRQUFTLFNBQVVDLFFBQ25CLEdBQUlDLFVBQVdQLE9BQU9RLFVBSXRCLE9B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LEdBQ0k1QixTQUFTRyxhQUd4QmlCLEdBQUdKLFVBQVU0QixVQUFZLFNBQVVoQixRQUMvQixHQUFJSCxPQUFRYixLQUNSWixTQUFXUCxPQUFPUSxVQUl0QixPQUhBUixRQUFPb0QsVUFBVUMsR0FBR2xDLEtBQUtTLG1CQUFvQixXQUN6Q3JCLFNBQVNJLFFBQVF3QixRQUFVSCxNQUFNZSxVQUFVWixXQUV4QzVCLFNBQVNHLFdBRWJpQixNQUVQMkIsV0FBYSxHQUFJM0IsR0FDakI0QixRQUFPQyxlQUNQRCxPQUFPQyxlQUFlekQsT0FBUSxNQUMxQjJCLFFBQU80QixXQUNQRyxZQUFVLEVBQ1ZDLGNBQVksRUFDWkMsZ0JBQWMsSUFJbEI1RCxPQUFPNEIsR0FBSzJCLFlBR2J2RCxPQUFRQSxPQUFPQyIsImZpbGUiOiJwcmVkYXRvcnMtZXM2LWluamVjdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAcHJvamVjdCAkTSAtIFByZWRhdG9ycyBNb2R1bGUgTWFuYWdlbWVudCBTeXN0ZW1cbiAqIEByZXF1aXJlcyBqUXVlcnkgKHdpbmRvdy5qUXVlcnkpXG4gKiBAdmVyc2lvbiAwLjAuMVxuICogQGRhdGUgVGh1IEphbiAxNCAyMDE2IDE3OjE5OjA4IEdNVCswMTAwIChXLiBFdXJvcGUgU3RhbmRhcmQgVGltZSlcbioqLyhmdW5jdGlvbih3aW5kb3csIGpRdWVyeSl7XG4ndXNlIHN0cmljdCdcbjtmdW5jdGlvbiBpc1N0cmluZyhpbnB1dCkge1xyXG4gICAgcmV0dXJuIGpRdWVyeS50eXBlKGlucHV0KSA9PT0gJ3N0cmluZyc7XHJcbn1cclxuZnVuY3Rpb24gaXNGdW5jdGlvbihpbnB1dCkge1xyXG4gICAgcmV0dXJuIGpRdWVyeS5pc0Z1bmN0aW9uKGlucHV0KTtcclxufVxyXG52YXIgcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgdmFyIGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCk7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTtcclxuICAgIH0sIDApO1xyXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxufTtcclxudmFyIHJlc29sdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4galF1ZXJ5LndoZW4uYXBwbHkoalF1ZXJ5LCBhcmd1bWVudHMpO1xyXG59O1xyXG52YXIgQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudChpZCwgZGVmaW5pdGlvbikge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLmRlZmluaXRpb24gPSBkZWZpbml0aW9uO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIENvbXBvbmVudDtcclxufSkoKTtcclxudmFyIE1vZHVsZVNjb3BlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1vZHVsZVNjb3BlKCkge1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE1vZHVsZVNjb3BlO1xyXG59KSgpO1xyXG52YXIgTW9kdWxlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1vZHVsZShpZCwgZmFjdG9yeSkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5O1xyXG4gICAgICAgIHRoaXMuc2NvcGUgPSBuZXcgTW9kdWxlU2NvcGUoKTtcclxuICAgIH1cclxuICAgIE1vZHVsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgICB9O1xyXG4gICAgTW9kdWxlLmlzTW9kdWxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgTW9kdWxlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNb2R1bGU7XHJcbn0pKCk7XHJcbnZhciAkTSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiAkTSgpIHtcclxuICAgICAgICB0aGlzLl9ZVE9TX1JFQURZX0VWRU5UXyA9ICd5VG9zUmVhZHknO1xyXG4gICAgICAgIHRoaXMuX0lOSkVDVE9SX01PRFVMRVNfQ09OVEFJTkVSXyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX0lOSkVDVE9SX0NPTVBPTkVOVFNfQ09OVEFJTkVSXyA9IHt9O1xyXG4gICAgfVxyXG4gICAgJE0ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCk7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWlzU3RyaW5nKGlkKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlamVjdChcIiRNLmdldCwgZmlyc3QgcGFyYW0gbXVzdCBiZSBhIHN0cmluZ1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaGFzU3luYyhpZCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKF90aGlzLl9JTkpFQ1RPUl9NT0RVTEVTX0NPTlRBSU5FUl9baWRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucmVqZWN0KFwiJE0gdW5rbm93biBtb2R1bGUgXCIgKyBpZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgIH07XHJcbiAgICAkTS5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuICAgICAgICB2YXIgcHJvbWlzZSA9IHJlamVjdChcIiRNLmluc3BlY3QgdW5rbm93biBcIiArIG1vZHVsZSArIFwiLCBwYXJhbSBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgTW9kdWxlXCIpO1xyXG4gICAgICAgIGlmIChpc1N0cmluZyhtb2R1bGUpKSB7XHJcbiAgICAgICAgICAgIHByb21pc2UgPSB0aGlzLmdldCgobW9kdWxlIHx8ICcnKS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE1vZHVsZS5pc01vZHVsZShtb2R1bGUpKSB7XHJcbiAgICAgICAgICAgIHByb21pc2UgPSByZXNvbHZlKG1vZHVsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9taXNlXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChtb2R1bGUpIHsgcmV0dXJuIG1vZHVsZS5zY29wZTsgfSk7XHJcbiAgICB9O1xyXG4gICAgJE0ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChpZCwgZmFjdG9yeSkge1xyXG4gICAgICAgIGlmICghaXNTdHJpbmcoaWQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiJE0uc2V0LCBmaXJzdCBwYXJhbSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZmFjdG9yeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCIkTS5zZXQsIHNlY29uZCBwYXJhbSBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhhc1N5bmMoaWQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiJE0uc2V0IFwiICsgaWQgKyBcIiBhbHJlZHkgZXhpc3RzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9JTkpFQ1RPUl9NT0RVTEVTX0NPTlRBSU5FUl9baWRdID0gbmV3IE1vZHVsZShpZCwgZmFjdG9yeSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgJE0ucHJvdG90eXBlLmhhc1N5bmMgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fSU5KRUNUT1JfTU9EVUxFU19DT05UQUlORVJfLmhhc093blByb3BlcnR5KGlkKTtcclxuICAgIH07XHJcbiAgICAkTS5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzU3luYyhpZCkgPyByZXNvbHZlKCkgOiByZWplY3QoKTtcclxuICAgIH07XHJcbiAgICAkTS5wcm90b3R5cGUucnVuTW9kdWxlcyA9IGZ1bmN0aW9uIChtb2R1bGVzKSB7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVzW2ldO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMucnVuTW9kdWxlKG1vZHVsZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZS5hcHBseShqUXVlcnksIHByb21pc2VzKTtcclxuICAgIH07XHJcbiAgICAkTS5wcm90b3R5cGUucnVuTW9kdWxlID0gZnVuY3Rpb24gKG1vZHVsZSkge1xyXG4gICAgICAgIHZhciBwcm9taXNlID0gcmVqZWN0KFwiJE0ucnVuTW9kdWxlIHVua25vd24gXCIgKyBtb2R1bGUgKyBcIiwgcGFyYW0gbXVzdCBiZSBhIHN0cmluZyBvciBhIE1vZHVsZVwiKTtcclxuICAgICAgICBpZiAoaXNTdHJpbmcobW9kdWxlKSkge1xyXG4gICAgICAgICAgICBwcm9taXNlID0gdGhpcy5nZXQoKG1vZHVsZSB8fCAnJykudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChNb2R1bGUuaXNNb2R1bGUobW9kdWxlKSkge1xyXG4gICAgICAgICAgICBwcm9taXNlID0gcmVzb2x2ZShtb2R1bGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvbWlzZVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobW9kdWxlKSB7XHJcbiAgICAgICAgICAgIHZhciBmYWlsdXJlLCBkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbW9kdWxlLmZhY3RvcnkuY2FsbChtb2R1bGUuc2NvcGUsIGpRdWVyeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsdXJlID0gZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZmFpbHVyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKG1vZHVsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgICRNLnByb3RvdHlwZS55VG9zUmVhZHkgPSBmdW5jdGlvbiAobW9kdWxlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKTtcclxuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9uKHRoaXMuX1lUT1NfUkVBRFlfRVZFTlRfLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobW9kdWxlICYmIF90aGlzLnJ1bk1vZHVsZShtb2R1bGUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiAkTTtcclxufSkoKTtcclxudmFyICRNSW5qZWN0b3IgPSBuZXcgJE0oKTtcclxuaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJyRNJywge1xyXG4gICAgICAgIHZhbHVlOiAkTUluamVjdG9yLFxyXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcclxuICAgIH0pO1xyXG59XHJcbmVsc2Uge1xyXG4gICAgd2luZG93LiRNID0gJE1JbmplY3RvcjtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcmVkYXRvcnMtZXM2LWluamVjdG9yLmpzLm1hcFxufSkod2luZG93LCB3aW5kb3cualF1ZXJ5KSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
